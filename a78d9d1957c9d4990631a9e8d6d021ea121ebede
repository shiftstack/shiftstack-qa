{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "3f135512_11afcdc6",
        "filename": "gate.sh",
        "patchSetId": 9
      },
      "lineNbr": 2,
      "author": {
        "id": 1005097
      },
      "writtenOn": "2024-04-15T14:22:27Z",
      "side": 1,
      "message": "One more note, the cloud-admin user does not exist on generic CI workers, these commands will likely fail (use \"rhos-ci\" instead).",
      "range": {
        "startLine": 2,
        "startChar": 12,
        "endLine": 2,
        "endChar": 23
      },
      "revId": "a78d9d1957c9d4990631a9e8d6d021ea121ebede",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "87aac6d8_ffbbb7e5",
        "filename": "gate.sh",
        "patchSetId": 9
      },
      "lineNbr": 2,
      "author": {
        "id": 1017837
      },
      "writtenOn": "2024-04-15T14:53:56Z",
      "side": 1,
      "message": "That path is inside the image we are using: quay.io/shiftstack-qe/shiftstack-client\n\nThe dockerfile is on https://gitlab.cee.redhat.com/shiftstack/shiftstack-tools/-/blob/main/osp18/Dockerfile?ref_type\u003dheads#L10",
      "parentUuid": "3f135512_11afcdc6",
      "range": {
        "startLine": 2,
        "startChar": 12,
        "endLine": 2,
        "endChar": 23
      },
      "revId": "a78d9d1957c9d4990631a9e8d6d021ea121ebede",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eec90bbd_ee905c06",
        "filename": "gate.sh",
        "patchSetId": 9
      },
      "lineNbr": 2,
      "author": {
        "id": 1005097
      },
      "writtenOn": "2024-04-16T16:55:23Z",
      "side": 1,
      "message": "Yeah, sorry, my bad, didn\u0027t realize that during fast-read...",
      "parentUuid": "87aac6d8_ffbbb7e5",
      "range": {
        "startLine": 2,
        "startChar": 12,
        "endLine": 2,
        "endChar": 23
      },
      "revId": "a78d9d1957c9d4990631a9e8d6d021ea121ebede",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "18710257_b6c8ace3",
        "filename": "gate.sh",
        "patchSetId": 9
      },
      "lineNbr": 2,
      "author": {
        "id": 1005097
      },
      "writtenOn": "2024-04-16T16:55:23Z",
      "side": 1,
      "message": "If I am not mistaken, I believe this might be dangerous to mount \".\" into container.\n\nI know this relies on https://code.engineering.redhat.com/gerrit/c/rhos-qe-jenkins/+/451471/2/jobs/DFG/osasinfra/shiftstack_ci/gate/gate.yml#139 but if the parts of the code change or something fails, it might be passing an arbitary directory into the container runtime.\n\nI believe it should be smth like:\n\n-v shiftstack-qa:/home/cloud-admin/shiftstack-qa:Z\n\nand the pushd line removed from the other change.",
      "range": {
        "startLine": 2,
        "startChar": 4,
        "endLine": 2,
        "endChar": 5
      },
      "revId": "a78d9d1957c9d4990631a9e8d6d021ea121ebede",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a1a05fa3_050c1791",
        "filename": "gate.sh",
        "patchSetId": 9
      },
      "lineNbr": 2,
      "author": {
        "id": 1017837
      },
      "writtenOn": "2024-04-17T08:16:29Z",
      "side": 1,
      "message": "From my point of view, the script should be self-content. So if you want to run the gate locally, you just clone the repo, make your changes and run the script directly from the clone repo.\n\nIf you are concerned about security, I found a different way to mount the directory: \"Overlay Volume Mounts\" [1]. I hope that resolves your concerns.\n\n[1] https://docs.podman.io/en/latest/markdown/podman-run.1.html",
      "parentUuid": "18710257_b6c8ace3",
      "range": {
        "startLine": 2,
        "startChar": 4,
        "endLine": 2,
        "endChar": 5
      },
      "revId": "a78d9d1957c9d4990631a9e8d6d021ea121ebede",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0d6295ee_99724982",
        "filename": "gate.sh",
        "patchSetId": 9
      },
      "lineNbr": 2,
      "author": {
        "id": 1017837
      },
      "writtenOn": "2024-04-17T08:25:35Z",
      "side": 1,
      "message": "I tested :O locally and it worked. However, trying on jenkins it failed [1](probably different podman version) so I rolled back to :Z. I don\u0027t see any risk on mounting the working directory on a container. @Filip please let me know your \nopinion.\n\n[1] https://rhos-ci-staging-jenkins.lab.eng.tlv2.redhat.com/view/All/job/DFG-osasinfra-shiftstack-qa-gate/18/console",
      "parentUuid": "a1a05fa3_050c1791",
      "range": {
        "startLine": 2,
        "startChar": 4,
        "endLine": 2,
        "endChar": 5
      },
      "revId": "a78d9d1957c9d4990631a9e8d6d021ea121ebede",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e9212663_da87f0f3",
        "filename": "gate.sh",
        "patchSetId": 9
      },
      "lineNbr": 2,
      "author": {
        "id": 1005097
      },
      "writtenOn": "2024-04-17T10:58:47Z",
      "side": 1,
      "message": "Ok I believe this is enough effort to try, even though that such mount might be dangerous, in this case nothing is deleted, just ansible-galaxy commands there. Let\u0027s keep it as it is.",
      "parentUuid": "0d6295ee_99724982",
      "range": {
        "startLine": 2,
        "startChar": 4,
        "endLine": 2,
        "endChar": 5
      },
      "revId": "a78d9d1957c9d4990631a9e8d6d021ea121ebede",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}