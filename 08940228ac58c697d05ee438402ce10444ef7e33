{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "c8990800_7d43a17c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 19
      },
      "lineNbr": 0,
      "author": {
        "id": 1019630
      },
      "writtenOn": "2024-07-16T20:35:51Z",
      "side": 1,
      "message": "Verified:\n```\n   Result    Host         Number   Changed   Task                                                                                                                                          Task action                           Duration\n 0â”‚Ok        localhost         0   False     Gather host environment variables                                                                                                             ansible.builtin.setup                       1s\n 1â”‚Ok        localhost         1   False     Cleanup workspace flags - Remove the stage_unstable_flag if it exists                                                                         ansible.builtin.file                        1s\n 2â”‚Ok        localhost         2   False     Discover the OSP version                                                                                                                      ansible.builtin.include_role                0s\n 3â”‚Ok        localhost         3   False     Check for /etc/rhosp-release                                                                                                                  ansible.builtin.stat                        0s\n 4â”‚Ok        localhost         4   False     Get /etc/rhosp-release content                                                                                                                ansible.builtin.command                     0s\n 5â”‚Ok        localhost         5   False     Set openstack_version from /etc/rhosp-release output                                                                                          ansible.builtin.set_fact                    0s\n 6â”‚Skipped   localhost         6   False     Unknown OSP version, setting default openstack_version                                                                                        ansible.builtin.set_fact                    0s\n 7â”‚Ok        localhost         7   False     Print the OSP version                                                                                                                         ansible.builtin.debug                       0s\n 8â”‚Ok        localhost         8   False     Cleanup the setup                                                                                                                             ansible.builtin.include_role                0s\n 9â”‚Ok        localhost         9   False     Check if OpenStack \"shiftstack\" project exists                                                                                                openstack.cloud.project_info                1s\n10â”‚Ok        localhost        10   False     Discover the OpenShift installation type                                                                                                      ansible.builtin.include_tasks               0s\n11â”‚Ok        localhost        11   False     Check if the \"installer-host\" exists on the \"shiftstack\" project                                                                              openstack.cloud.server_info                 3s\n12â”‚Ok        localhost        12   False     Check if the target cluster directory exists                                                                                                  ansible.builtin.stat                        0s\n13â”‚Ok        localhost        13   False     Set OpenShift IPI installation type in case the target cluster directory exists                                                               ansible.builtin.set_fact                    0s\n14â”‚Skipped   localhost        14   False     Update the Ansible inventory in case there is installer host to destroy                                                                       ansible.builtin.include_role                0s\n15â”‚Skipped   localhost        15   False     Discover if UPI installation was performed on the installer host VM to destroy                                                                ansible.builtin.stat                        0s\n16â”‚Skipped   localhost        16   False     Set OpenShift UPI installation type in case the target UPI inventory.yaml file exists                                                         ansible.builtin.set_fact                    0s\n17â”‚Skipped   localhost        17   False     Set OpenShift IPI-Proxy (restricted) installation type in case the target UPI inventory.yaml file doesn\u0027t exist                               ansible.builtin.set_fact                    0s\n18â”‚Skipped   localhost        18   False     Fail if there is more than one installer VM                                                                                                   ansible.builtin.fail                        0s\n19â”‚Ok        localhost        19   False     Destroy the OpenShift cluster if it exists                                                                                                    ansible.builtin.include_tasks               0s\n20â”‚Ok        localhost        20   False     Destroy IPI cluster                                                                                                                           ansible.builtin.include_tasks               0s\n21â”‚Ok        localhost        21   False     Check if OCP cluster directory exists                                                                                                         ansible.builtin.stat                        0s\n22â”‚Ok        localhost        22   True      Run \u0027openshift-install destroy cluster\u0027                                                                                                       ansible.builtin.shell                      46s\n23â”‚Ok        localhost        23   True      Remove the OCP cluster directory                                                                                                              ansible.builtin.file                        0s\n24â”‚Ok        localhost        24   True      Remove API and APPS fip/vip from the /etc/hosts file                                                                                          ansible.builtin.lineinfile                  0s\n25â”‚Ok        localhost        25   False     Cleanup the OpenStack project                                                                                                                 ansible.builtin.include_tasks               0s\n26â”‚Ok        localhost        26   False     Get project ID for \"shiftstack\"                                                                                                               openstack.cloud.project_info                1s\n27â”‚Ok        localhost        27   True      Purge the OpenStack project                                                                                                                   project_purge                               3s\n28â”‚Ok        localhost        28   True      Delete project                                                                                                                                openstack.cloud.project                     1s\n30â”‚Ok        localhost        30   True      Restore the OpenStack original config directory (includes the clouds.yaml and secure.yaml)                                                    ansible.builtin.copy                        0s\n```",
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "850629d3_c416a01b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 19
      },
      "lineNbr": 0,
      "author": {
        "id": 1019630
      },
      "writtenOn": "2024-07-16T20:38:51Z",
      "side": 1,
      "message": "recheck",
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bf3ac89f_46122bf3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 19
      },
      "lineNbr": 0,
      "author": {
        "id": 1017837
      },
      "writtenOn": "2024-07-17T11:23:58Z",
      "side": 1,
      "message": "what if we don\u0027t run cleanup, as for example we are doing in the osp-verification?\n\nIn that case, the copy for ~/.original-config/openstack/clouds.yaml to ~/.config/openstack/clouds.yaml is still needed I think.",
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8d764ac9_5105df34",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 19
      },
      "lineNbr": 0,
      "author": {
        "id": 1019630
      },
      "writtenOn": "2024-07-17T11:28:22Z",
      "side": 1,
      "message": "Interesting. Until now we run it just when \u0027prepare\u0027 in stages. [0]\n@rlobillo@redhat.com do you have any suggestions? \n\n[0] https://review.gerrithub.io/c/shiftstack/shiftstack-qa/+/1197459/19/playbooks/ocp_testing.yaml",
      "parentUuid": "bf3ac89f_46122bf3",
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d364c5cc_9151551c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 19
      },
      "lineNbr": 0,
      "author": {
        "id": 1017837
      },
      "writtenOn": "2024-07-17T11:59:23Z",
      "side": 1,
      "message": "yeah, it\u0027s bit confusing. I added that \n`when: \"\u0027prepare\u0027 in stages\"`\nbecause it was deleting the clouds.yaml when I want to run only tests. So it\u0027s different thing.\n\nNow, the original reason why we need to move the clouds.yml from .original-config to .config is because the clouds.yaml that is mounted on the pod is read-only. So we are mounting on the .original-config and then first thing is to move to .config which is rw.\n\nPlease take a look at my previous comments and let me know your opinion. Basically, I think we need to restore the original pre_task and on cleanup pick the PVC clouds.yml and restore it back later.",
      "parentUuid": "8d764ac9_5105df34",
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "13b5244a_bdc187ea",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 19
      },
      "lineNbr": 0,
      "author": {
        "id": 1019630
      },
      "writtenOn": "2024-08-11T07:37:32Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "d364c5cc_9151551c",
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "72dc4e9a_7f741a18",
        "filename": "collection/stages/plugins/modules/project_purge.py",
        "patchSetId": 19
      },
      "lineNbr": 1,
      "author": {
        "id": 1017837
      },
      "writtenOn": "2024-07-17T11:54:22Z",
      "side": 1,
      "message": "how cool is this!! ðŸ˜®\n\nwhere did you find the skeleton?",
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4261683c_e8d0fbfc",
        "filename": "collection/stages/plugins/modules/project_purge.py",
        "patchSetId": 19
      },
      "lineNbr": 1,
      "author": {
        "id": 1019630
      },
      "writtenOn": "2024-07-23T10:06:23Z",
      "side": 1,
      "message": "A collaboration between me and GPT \u003d]",
      "parentUuid": "72dc4e9a_7f741a18",
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ff873d7b_1cff8b69",
        "filename": "collection/stages/plugins/modules/project_purge.py",
        "patchSetId": 19
      },
      "lineNbr": 114,
      "author": {
        "id": 1017837
      },
      "writtenOn": "2024-07-17T11:54:22Z",
      "side": 1,
      "message": "should we add here network trunks, manila shares and swift containers too?",
      "range": {
        "startLine": 114,
        "startChar": 0,
        "endLine": 114,
        "endChar": 6
      },
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "216ea00a_7d16980a",
        "filename": "collection/stages/plugins/modules/project_purge.py",
        "patchSetId": 19
      },
      "lineNbr": 114,
      "author": {
        "id": 1019630
      },
      "writtenOn": "2024-07-23T10:06:23Z",
      "side": 1,
      "message": "- Trunk removal is not straightforward. [0-4]\n- Add support of swift container.\n- Have some issues with the Manila support. I think we can skip it for now and add it in the future if needed. wdyt?\n\n\n\n[0] https://access.redhat.com/solutions/4629401\n[1] https://bugzilla.redhat.com/show_bug.cgi?id\u003d1779138\n[2] https://bugs.launchpad.net/neutron/+bug/2030718\n[3] https://adam.younglogic.com/2019/11/deleting-trunks-before-ports\n[4] https://bugzilla.redhat.com/show_bug.cgi?id\u003d1749473",
      "parentUuid": "ff873d7b_1cff8b69",
      "range": {
        "startLine": 114,
        "startChar": 0,
        "endLine": 114,
        "endChar": 6
      },
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "21829e43_a0edd97c",
        "filename": "collection/stages/roles/cleanup/tasks/destroy_ipi.yml",
        "patchSetId": 19
      },
      "lineNbr": 13,
      "author": {
        "id": 1017837
      },
      "writtenOn": "2024-07-17T11:54:22Z",
      "side": 1,
      "message": "I believe this won\u0027t work on the pod because you don\u0027t have the binary openshift-install and you don\u0027t have the clouds.yaml with the {{ user_cloud }} creds in the proper place (you need to recover from the PVC).",
      "range": {
        "startLine": 13,
        "startChar": 10,
        "endLine": 13,
        "endChar": 94
      },
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "29dd885b_1ea6a35c",
        "filename": "collection/stages/roles/cleanup/tasks/destroy_ipi.yml",
        "patchSetId": 19
      },
      "lineNbr": 13,
      "author": {
        "id": 1019630
      },
      "writtenOn": "2024-07-23T10:06:23Z",
      "side": 1,
      "message": "I think we discussed to have it as part of another task - https://issues.redhat.com/browse/OSPRH-7508",
      "parentUuid": "21829e43_a0edd97c",
      "range": {
        "startLine": 13,
        "startChar": 10,
        "endLine": 13,
        "endChar": 94
      },
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "276d6c42_bc45e351",
        "filename": "collection/stages/roles/cleanup/tasks/destroy_ipi.yml",
        "patchSetId": 19
      },
      "lineNbr": 13,
      "author": {
        "id": 1019630
      },
      "writtenOn": "2024-08-11T07:36:53Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "29dd885b_1ea6a35c",
      "range": {
        "startLine": 13,
        "startChar": 10,
        "endLine": 13,
        "endChar": 94
      },
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ac28d670_43d7194f",
        "filename": "collection/stages/roles/cleanup/tasks/destroy_openshift_cluster.yml",
        "patchSetId": 19
      },
      "lineNbr": 12,
      "author": {
        "id": 1017837
      },
      "writtenOn": "2024-07-17T13:43:28Z",
      "side": 1,
      "message": "This is a good to have, but in RHOSO deployments it shouldn\u0027t be there, as the cleanup is run on a fresh pod where the /etc/hosts hasn\u0027t been manipulated.",
      "range": {
        "startLine": 6,
        "startChar": 0,
        "endLine": 12,
        "endChar": 17
      },
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c9cec949_aa725e0a",
        "filename": "collection/stages/roles/cleanup/tasks/destroy_openshift_cluster.yml",
        "patchSetId": 19
      },
      "lineNbr": 12,
      "author": {
        "id": 1019630
      },
      "writtenOn": "2024-07-23T10:06:23Z",
      "side": 1,
      "message": "so I assume nothing won\u0027t be removed in such a case. isn\u0027t it?\nit removes just the `regexp: \"{{ ocp_cluster_name }}\"` if they found in the file.",
      "parentUuid": "ac28d670_43d7194f",
      "range": {
        "startLine": 6,
        "startChar": 0,
        "endLine": 12,
        "endChar": 17
      },
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a40338ac_7075c289",
        "filename": "collection/stages/roles/cleanup/tasks/destroy_openshift_cluster.yml",
        "patchSetId": 19
      },
      "lineNbr": 12,
      "author": {
        "id": 1019630
      },
      "writtenOn": "2024-08-11T07:36:53Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "c9cec949_aa725e0a",
      "range": {
        "startLine": 6,
        "startChar": 0,
        "endLine": 12,
        "endChar": 17
      },
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "067a3726_d52afedf",
        "filename": "collection/stages/roles/cleanup/tasks/main.yml",
        "patchSetId": 19
      },
      "lineNbr": 2,
      "author": {
        "id": 1017837
      },
      "writtenOn": "2024-07-17T11:54:22Z",
      "side": 1,
      "message": "As you are setting cleanup stage in the first position in the palybook, You need to use the clouds.yaml stored on the PVC for running the cleanup on the project that was created by another pod (you\u0027ll find it on the PVC).",
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "13a3c933_266fed73",
        "filename": "collection/stages/roles/cleanup/tasks/main.yml",
        "patchSetId": 19
      },
      "lineNbr": 2,
      "author": {
        "id": 1019630
      },
      "writtenOn": "2024-07-23T10:06:23Z",
      "side": 1,
      "message": "isn\u0027t this part of the pod creation before running the collection? the clouds.yaml is not in place?",
      "parentUuid": "067a3726_d52afedf",
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cfaa6217_8ae73481",
        "filename": "collection/stages/roles/cleanup/tasks/main.yml",
        "patchSetId": 19
      },
      "lineNbr": 2,
      "author": {
        "id": 1019630
      },
      "writtenOn": "2024-08-11T07:36:53Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "13a3c933_266fed73",
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "011dbf7b_0c7efc83",
        "filename": "collection/stages/roles/cleanup/tasks/main.yml",
        "patchSetId": 19
      },
      "lineNbr": 9,
      "author": {
        "id": 1017837
      },
      "writtenOn": "2024-07-17T11:54:22Z",
      "side": 1,
      "message": "Would you mind to add an assert that confirms that length \u003d\u003d 1? If length \u003e 1 we can just simply fail - Something wrong is happening",
      "range": {
        "startLine": 9,
        "startChar": 49,
        "endLine": 9,
        "endChar": 52
      },
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "52a265d6_e6e6e74c",
        "filename": "collection/stages/roles/cleanup/tasks/main.yml",
        "patchSetId": 19
      },
      "lineNbr": 9,
      "author": {
        "id": 1019630
      },
      "writtenOn": "2024-07-23T10:06:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "011dbf7b_0c7efc83",
      "range": {
        "startLine": 9,
        "startChar": 49,
        "endLine": 9,
        "endChar": 52
      },
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0a133222_02789c86",
        "filename": "collection/stages/roles/cleanup/tasks/openstack_project_cleanup.yml",
        "patchSetId": 19
      },
      "lineNbr": 17,
      "author": {
        "id": 1019630
      },
      "writtenOn": "2024-07-16T20:37:13Z",
      "side": 1,
      "message": "```\n31â”‚  messages:\n32â”‚  - \u0027Deleting floating_ip with ID: 1cfd9ba4-199a-412c-947b-a5474d8bbf45\u0027\n33â”‚  - \u0027floating_ip with ID: 1cfd9ba4-199a-412c-947b-a5474d8bbf45 deleted successfully\u0027\n34â”‚  - \u0027Deleting floating_ip with ID: 870ea6a8-f8d9-4d47-8b07-5e58de28b4a6\u0027\n35â”‚  - \u0027floating_ip with ID: 870ea6a8-f8d9-4d47-8b07-5e58de28b4a6 deleted successfully\u0027\n36â”‚  - \u0027Deleting security_group with ID: 0c32f72c-95d9-44a3-987d-2c953f41db1e\u0027\n37â”‚  - \u0027security_group with ID: 0c32f72c-95d9-44a3-987d-2c953f41db1e deleted successfully\u0027\n38â”‚  msg: Project shiftstack purged successfully\n```",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 17,
        "endChar": 0
      },
      "revId": "08940228ac58c697d05ee438402ce10444ef7e33",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}