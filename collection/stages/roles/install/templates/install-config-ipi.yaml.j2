# This file is autogenerated by shiftstack-qe automation
apiVersion: v1
baseDomain: "{{ installcfg_ocp_base_domain }}"
controlPlane:
  name: master
  platform:
    openstack:
      type: "{{ installcfg_master_flavor }}"
      serverGroupPolicy: "{{ installcfg_master_servergrouppolicy }}"
      {%- if installcfg_ctrl_rootvolume is defined %}
      rootVolume: {{ installcfg_ctrl_rootvolume }}
      {%- endif +%}
  replicas: "{{ installcfg_master_replicas }}"
compute:
- name: worker
  platform:
    openstack:
      type: "{{ installcfg_worker_flavor }}"
      serverGroupPolicy: "{{ installcfg_worker_servergrouppolicy }}"
  replicas: "{{ installcfg_worker_replicas }}"
metadata:
  name: "{{ installcfg_cluster_name }}"
networking:
  clusterNetworks:
  - cidr: "{{ installcfg_cluster_network.cidr }}"
    hostPrefix: "{{ installcfg_cluster_network.host_prefix }}"
  machineNetwork:
  - cidr: "{{ installcfg_subnet.cidr }}"
  serviceNetwork: {{ installcfg_service_network | to_nice_yaml(indent=2) }}
  networkType: "{{ installcfg_network_type }}"
platform:
  openstack:
    cloud:            "{{ user_cloud }}"
    externalNetwork:   "{{ installcfg_external_network }}"
    region:            "{{ installcfg_region }}"
    {%- if installcfg_api_vips %}
    apiVIPs: ["{{ installcfg_api_floating_ip }}"]
    ingressVIPs: ["{{ installcfg_ingress_floating_ip }}"]
    controlPlanePort:
      fixedIPs:
        - subnet:
            name: "{{ installcfg_subnet.name }}"
    {%- else %}
    apiFloatingIP:     "{{ installcfg_api_floating_ip }}"
    ingressFloatingIP: "{{ installcfg_ingress_floating_ip }}"
    {%- endif +%}
    externalDNS:      {{ installcfg_dns_servers }}
pullSecret: |
  {{ ocp_pull_secret }}
sshKey: |
  {{ ocp_public_key }}
