---
- name: Deploy and configure an installer host VM and create the installer inventory group
  ansible.builtin.include_role:
    name: shiftstack.tools.tools_installer_host
  when:
    - upi

- name: Create new Project
  ansible.builtin.import_tasks: project.yml
  delegate_to: installer

- name: Update clouds.yml file with new Project
  ansible.builtin.include_tasks: clouds.yml

- name: Prepare setup for accessing the OCP Cluster
  ansible.builtin.include_tasks: external_access.yml

- name: Get OCP installer and client in the installer host
  ansible.builtin.include_tasks: get_installer.yml
